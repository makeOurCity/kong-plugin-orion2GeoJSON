# Orionレスポンスのgeo:json属性をGeoJSON形式に変換する機能の実装

## 概要
OrionのレスポンスからGeoJSON形式への変換機能を実装します。entity_typeとlocation_attrを指定して、特定の位置情報属性をGeoJSON形式に変換します。

## 実装内容

### データモデルの変更
スキーマに以下のフィールドを追加：
- `entity_type`: 変換対象のエンティティタイプ（必須）
- `location_attr`: 位置情報を含む属性名（必須）

### 実装ステップ
1. スキーマ更新
   - entity_typeとlocation_attrフィールドの追加
   - バリデーションルールの実装

2. ハンドラー更新
   - entity_typeによるフィルタリング機能
   - 指定されたlocation_attrの変換処理
   - エラーハンドリングの強化

3. テスト実装
   - スキーマバリデーションテスト
   - 変換機能のユニットテスト
   - エラーケースのテスト

4. 動作確認
   - Orionテストデータでの確認
   - エンドツーエンドテスト

## テスト計画
1. ユニットテスト
   - スキーマフィールドのバリデーション
   - GeoJSON変換の正常系テスト
   - エラーケースのテスト

2. 統合テスト
   - Orionとの連携テスト
   - 実際のユースケースに基づくテスト

## 注意点
- lua-pongoによるコードスタイルチェック
- 既存の機能への影響がないことを確認
- テストの完全な実行と確認

## 開発環境
- Pongo環境（Orion v3.10.1, MongoDB 4.4）
- Kong開発環境